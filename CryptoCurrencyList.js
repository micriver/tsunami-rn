import {
  Dimensions,
  FlatList,
  SafeAreaView,
  StyleSheet,
  Text,
  View,
} from "react-native";
import CryptocurrencyListItem from "./CryptocurrencyListItem";
import React, { useEffect } from "react";
import { getMarketData } from "./apis/coinGeckoAPI";

const DATA = [
  {
    id: "bitcoin",
    symbol: "btc",
    name: "Bitcoin",
    image:
      "https://assets.coingecko.com/coins/images/1/large/bitcoin.png?1547033579",
    current_price: 29405,
    market_cap: 569484392152,
    market_cap_rank: 1,
    fully_diluted_valuation: 617758162407,
    total_volume: 17386049969,
    high_24h: 29544,
    low_24h: 28969,
    price_change_24h: -73.15458235108235,
    price_change_percentage_24h: -0.24817,
    market_cap_change_24h: -1164207768.1923828,
    market_cap_change_percentage_24h: -0.20401,
    circulating_supply: 19358987,
    total_supply: 21000000,
    max_supply: 21000000,
    ath: 69045,
    ath_change_percentage: -57.42344,
    ath_date: "2021-11-10T14:24:11.849Z",
    atl: 67.81,
    atl_change_percentage: 43252.48392,
    atl_date: "2013-07-06T00:00:00.000Z",
    roi: null,
    last_updated: "2023-04-29T04:34:40.623Z",
    price_change_percentage_24h_in_currency: -0.24816854854399642,
  },
  {
    id: "ethereum",
    symbol: "eth",
    name: "Ethereum",
    image:
      "https://assets.coingecko.com/coins/images/279/large/ethereum.png?1595348880",
    current_price: 1902.65,
    market_cap: 229099329690,
    market_cap_rank: 2,
    fully_diluted_valuation: 229110243853,
    total_volume: 8047384442,
    high_24h: 1922.57,
    low_24h: 1880.33,
    price_change_24h: -9.515130397475104,
    price_change_percentage_24h: -0.49761,
    market_cap_change_24h: -1000089737.9986267,
    market_cap_change_percentage_24h: -0.43463,
    circulating_supply: 120400464.266637,
    total_supply: 120406200.07691,
    max_supply: null,
    ath: 4878.26,
    ath_change_percentage: -61.0163,
    ath_date: "2021-11-10T14:24:19.604Z",
    atl: 0.432979,
    atl_change_percentage: 439119.23426,
    atl_date: "2015-10-20T00:00:00.000Z",
    roi: {
      times: 85.49468736353957,
      currency: "btc",
      percentage: 8549.468736353958,
    },
    last_updated: "2023-04-29T04:34:42.547Z",
    price_change_percentage_24h_in_currency: -0.49760972069102083,
  },
  {
    id: "tether",
    symbol: "usdt",
    name: "Tether",
    image:
      "https://assets.coingecko.com/coins/images/325/large/Tether.png?1668148663",
    current_price: 1.001,
    market_cap: 81689531213,
    market_cap_rank: 3,
    fully_diluted_valuation: 81689531213,
    total_volume: 23858815161,
    high_24h: 1.005,
    low_24h: 0.997392,
    price_change_24h: 0.0003299,
    price_change_percentage_24h: 0.03297,
    market_cap_change_24h: 26924856,
    market_cap_change_percentage_24h: 0.03297,
    circulating_supply: 81615536097.7521,
    total_supply: 81615536097.7521,
    max_supply: null,
    ath: 1.32,
    ath_change_percentage: -24.29136,
    ath_date: "2018-07-24T00:00:00.000Z",
    atl: 0.572521,
    atl_change_percentage: 74.96258,
    atl_date: "2015-03-02T00:00:00.000Z",
    roi: null,
    last_updated: "2023-04-29T04:30:00.290Z",
    price_change_percentage_24h_in_currency: 0.032970851050690295,
  },
  {
    id: "binancecoin",
    symbol: "bnb",
    name: "BNB",
    image:
      "https://assets.coingecko.com/coins/images/825/large/bnb-icon2_2x.png?1644979850",
    current_price: 324.36,
    market_cap: 51222940667,
    market_cap_rank: 4,
    fully_diluted_valuation: 64885866799,
    total_volume: 1354090647,
    high_24h: 327.71,
    low_24h: 319.88,
    price_change_24h: -3.3196865341146804,
    price_change_percentage_24h: -1.01309,
    market_cap_change_24h: -436157935.0171814,
    market_cap_change_percentage_24h: -0.8443,
    circulating_supply: 157886280,
    total_supply: 157900174,
    max_supply: 200000000,
    ath: 686.31,
    ath_change_percentage: -52.71981,
    ath_date: "2021-05-10T07:24:17.097Z",
    atl: 0.0398177,
    atl_change_percentage: 814831.76888,
    atl_date: "2017-10-19T00:00:00.000Z",
    roi: null,
    last_updated: "2023-04-29T04:34:42.023Z",
    price_change_percentage_24h_in_currency: -1.0130873758367975,
  },
  {
    id: "usd-coin",
    symbol: "usdc",
    name: "USD Coin",
    image:
      "https://assets.coingecko.com/coins/images/6319/large/USD_Coin_icon.png?1547042389",
    current_price: 1,
    market_cap: 30508403359,
    market_cap_rank: 5,
    fully_diluted_valuation: 30506403912,
    total_volume: 5843400969,
    high_24h: 1.003,
    low_24h: 0.994044,
    price_change_24h: 0.00046911,
    price_change_percentage_24h: 0.04692,
    market_cap_change_24h: -29469400.35576248,
    market_cap_change_percentage_24h: -0.0965,
    circulating_supply: 30502657798.2263,
    total_supply: 30500658728.3347,
    max_supply: null,
    ath: 1.17,
    ath_change_percentage: -14.64875,
    ath_date: "2019-05-08T00:40:28.300Z",
    atl: 0.877647,
    atl_change_percentage: 14.04583,
    atl_date: "2023-03-11T08:02:13.981Z",
    roi: null,
    last_updated: "2023-04-29T04:34:42.180Z",
    price_change_percentage_24h_in_currency: 0.046921826910867895,
  },
  {
    id: "ripple",
    symbol: "xrp",
    name: "XRP",
    image:
      "https://assets.coingecko.com/coins/images/44/large/xrp-symbol-white-128.png?1605778731",
    current_price: 0.481574,
    market_cap: 24924388885,
    market_cap_rank: 6,
    fully_diluted_valuation: 48162316113,
    total_volume: 1247066048,
    high_24h: 0.485298,
    low_24h: 0.46714,
    price_change_24h: 0.01058267,
    price_change_percentage_24h: 2.24689,
    market_cap_change_24h: 608022864,
    market_cap_change_percentage_24h: 2.50047,
    circulating_supply: 51750810378,
    total_supply: 99988998998,
    max_supply: 100000000000,
    ath: 3.4,
    ath_change_percentage: -85.82684,
    ath_date: "2018-01-07T00:00:00.000Z",
    atl: 0.00268621,
    atl_change_percentage: 17831.14759,
    atl_date: "2014-05-22T00:00:00.000Z",
    roi: null,
    last_updated: "2023-04-29T04:34:44.334Z",
    price_change_percentage_24h_in_currency: 2.246893233670914,
  },
  {
    id: "cardano",
    symbol: "ada",
    name: "Cardano",
    image:
      "https://assets.coingecko.com/coins/images/975/large/cardano.png?1547034860",
    current_price: 0.405669,
    market_cap: 14226222531,
    market_cap_rank: 7,
    fully_diluted_valuation: 18267360062,
    total_volume: 234775358,
    high_24h: 0.410729,
    low_24h: 0.398754,
    price_change_24h: -0.003919631226741494,
    price_change_percentage_24h: -0.95697,
    market_cap_change_24h: -121435568.16404343,
    market_cap_change_percentage_24h: -0.84638,
    circulating_supply: 35045020830.3234,
    total_supply: 45000000000,
    max_supply: 45000000000,
    ath: 3.09,
    ath_change_percentage: -86.86388,
    ath_date: "2021-09-02T06:00:10.474Z",
    atl: 0.01925275,
    atl_change_percentage: 2006.19513,
    atl_date: "2020-03-13T02:22:55.044Z",
    roi: null,
    last_updated: "2023-04-29T04:34:46.815Z",
    price_change_percentage_24h_in_currency: -0.9569682679404165,
  },
  {
    id: "staked-ether",
    symbol: "steth",
    name: "Lido Staked Ether",
    image:
      "https://assets.coingecko.com/coins/images/13442/large/steth_logo.png?1608607546",
    current_price: 1900.4,
    market_cap: 11782304199,
    market_cap_rank: 8,
    fully_diluted_valuation: 11782304199,
    total_volume: 19005813,
    high_24h: 1919.85,
    low_24h: 1873.6,
    price_change_24h: -4.238708262227419,
    price_change_percentage_24h: -0.22255,
    market_cap_change_24h: 9196499,
    market_cap_change_percentage_24h: 0.07811,
    circulating_supply: 6199351.49591586,
    total_supply: 6199351.49591586,
    max_supply: 6199351.49591586,
    ath: 4829.57,
    ath_change_percentage: -60.72257,
    ath_date: "2021-11-10T14:40:47.256Z",
    atl: 482.9,
    atl_change_percentage: 292.8238,
    atl_date: "2020-12-22T04:08:21.854Z",
    roi: null,
    last_updated: "2023-04-29T04:34:39.862Z",
    price_change_percentage_24h_in_currency: -0.22254620541261586,
  },
  {
    id: "dogecoin",
    symbol: "doge",
    name: "Dogecoin",
    image:
      "https://assets.coingecko.com/coins/images/5/large/dogecoin.png?1547792256",
    current_price: 0.081051,
    market_cap: 11284710534,
    market_cap_rank: 9,
    fully_diluted_valuation: null,
    total_volume: 303752733,
    high_24h: 0.081118,
    low_24h: 0.0794,
    price_change_24h: 0.00080385,
    price_change_percentage_24h: 1.00171,
    market_cap_change_24h: 130003896,
    market_cap_change_percentage_24h: 1.16546,
    circulating_supply: 139133546383.705,
    total_supply: null,
    max_supply: null,
    ath: 0.731578,
    ath_change_percentage: -88.92224,
    ath_date: "2021-05-08T05:08:23.458Z",
    atl: 0.0000869,
    atl_change_percentage: 93155.41052,
    atl_date: "2015-05-06T00:00:00.000Z",
    roi: null,
    last_updated: "2023-04-29T04:34:47.054Z",
    price_change_percentage_24h_in_currency: 1.0017097986034575,
  },
  {
    id: "matic-network",
    symbol: "matic",
    name: "Polygon",
    image:
      "https://assets.coingecko.com/coins/images/4713/large/matic-token-icon.png?1624446912",
    current_price: 1.008,
    market_cap: 9323470887,
    market_cap_rank: 10,
    fully_diluted_valuation: 10080006557,
    total_volume: 292650393,
    high_24h: 1.014,
    low_24h: 0.982078,
    price_change_24h: -0.001283856789759952,
    price_change_percentage_24h: -0.12715,
    market_cap_change_24h: -10357209.930425644,
    market_cap_change_percentage_24h: -0.11096,
    circulating_supply: 9249469069.28493,
    total_supply: 10000000000,
    max_supply: 10000000000,
    ath: 2.92,
    ath_change_percentage: -65.52809,
    ath_date: "2021-12-27T02:08:34.307Z",
    atl: 0.00314376,
    atl_change_percentage: 31877.36197,
    atl_date: "2019-05-10T00:00:00.000Z",
    roi: {
      times: 382.44043298634637,
      currency: "usd",
      percentage: 38244.04329863464,
    },
    last_updated: "2023-04-29T04:34:39.409Z",
    price_change_percentage_24h_in_currency: -0.12714824736953695,
  },
];

const CryptoCurrencyList = () => {
  // useEffect(() => {
  //   async function handleGetMarketData() {
  //     const prices = await getMarketData();
  //     console.log(JSON.stringify(prices, null, 3));
  //   }
  //   handleGetMarketData();
  // }, []);

  return (
    <SafeAreaView style={styles.container}>
      <FlatList
        data={DATA}
        renderItem={({ item, index }) => (
          <CryptocurrencyListItem currency={item} index={index} />
        )}
        showsVerticalScrollIndicator={false}
        style={styles.list}
      />
    </SafeAreaView>
  );
};

export default CryptoCurrencyList;

const styles = StyleSheet.create({
  container: {
    flex: 1,
    width: Dimensions.get("screen").width,
    display: "flex",
    flexDirection: "column",
    justifyContent: "center",
    alignItems: "center",
  },
  list: {
    flex: 1,
  },
  text: {
    color: "#fff",
  },
});
